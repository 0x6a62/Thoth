<!doctype html>
<html class="has-navbar-fixed-top">

<head>
    <title>Thoth</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> <link rel="stylesheet" type="text/css" href="https://mangelmaxime.github.io/Thoth/main.css"/>
</head>

<body>
    <nav class="navbar is-fixed-top is-thoth-primary"><div class="bd-special-shadow" style="opacity:1;transform:scaleY(1)"></div><div class="container"><div class="navbar-brand"><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/index.html"><p class="title is-4">Thoth</p></a><a class="navbar-item is-hidden-desktop" href="https://github.com/MangelMaxime/Thoth"><span class="icon"><i class="fa  fa-github fa-lg"></i></span></a><a class="navbar-item twitter is-hidden-desktop" href="https://twitter.com/MangelMaxime"><span class="icon"><i class="fa  fa-twitter fa-lg"></i></span></a><div class="navbar-burger"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="navMenu"><div class="navbar-item is-hoverable has-dropdown"><div class="navbar-link">Json</div><div class="navbar-dropdown"><div class="navbar-item"><strong>Version 2</strong></div><div class="navbar-divider"></div><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v2/decode.html">Decode</a><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v2/encode.html">Encode</a><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v2/net.html">.Net &amp; NetCore</a><div class="navbar-divider"></div><div class="navbar-item"><strong>Version 1</strong></div><div class="navbar-divider"></div><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v1/decode.html">Decode</a><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v1/encode.html">Encode</a><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/json/v1/net.html">.Net &amp; NetCore</a></div></div><div class="navbar-item is-hoverable has-dropdown"><div class="navbar-link">Elmish</div><div class="navbar-dropdown"><a class="navbar-item is-active" href="https://mangelmaxime.github.io/Thoth/elmish/debouncer.html">Debouncer</a><div class="navbar-divider"></div><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/elmish/FormBuilder.html">FormBuilder</a><div class="navbar-divider"></div><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/elmish/toast_docs.html">Toast - Docs</a><a class="navbar-item" href="https://mangelmaxime.github.io/Thoth/elmish/toast_demo.html">Toast - Demo</a></div></div></div><div class="navbar-end"><a class="navbar-item is-hidden-mobile" href="https://github.com/MangelMaxime/Thoth"><span class="icon"><i class="fa  fa-github fa-lg"></i></span></a><a class="navbar-item twitter is-hidden-mobile" href="https://twitter.com/MangelMaxime"><span class="icon"><i class="fa  fa-twitter fa-lg"></i></span></a><div class="navbar-item"><div class="field is-grouped"><p class="control"><a class="button twitter" href="https://twitter.com/intent/tweet?via=MangelMaxime&amp;text=Thoth%20is%20a%20set%20of%20several%20libraries%20for%20working%20with%20@FableCompiler%20applications" target="_blank"><span class="icon"><i class="fa  fa-twitter fa-lg"></i></span><span>Tweet</span></a></p><p class="control"><a class="button github" href="https://github.com/MangelMaxime/Thoth"><span class="icon"><i class="fa  fa-github fa-lg"></i></span><span>Github</span></a></p></div></div></div></div></nav>
    <div class="container">
        <section class="section">
            <div class="columns">
                <div class="column is-9-desktop is-12-mobile">
                    <div class="content" style="margin: 1rem 0 0">
                        <h1>Debouncer</h1>
<h2><a href="#kezako" aria-hidden="true"><span class="anchor" id="kezako"></span>#</a> Kezako ?</h2>
<blockquote>
<p>Debouncing enforces that a function not be called again until a certain amount of time has passed without it being called. As in &quot;execute this function only if 100 milliseconds have passed without it being called.&quot;</p>
<p>Perhaps a function is called 1,000 times in a quick burst, dispersed over 3 seconds, then stops being called. If you have debounced it at 100 milliseconds, the function will only fire once, at 3.1 seconds, once the burst is over. Each time the function is called during the burst it resets the debouncing timer.</p>
<p><a href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/">Source</a></p>
</blockquote>
<h2><a href="#demo" aria-hidden="true"><span class="anchor" id="demo"></span>#</a> Demo</h2>
<p>The following demo works like that:</p>
<ol>
<li>Ask the user to type something</li>
<li>User <strong>is typing</strong></li>
<li>When user <strong>stop typing</strong>, <strong>disable</strong> the input and <strong>inform</strong> the user.</li>
<li>After a <strong>short period</strong> of time, <strong>reset</strong> the demo.</li>
</ol>
<div class="columns">
    <div class="column is-4 is-offset-4">
        <div id="debouncer_demo"></div>
    </div>
</div>
<div class="has-text-centered">
<p><em><a href="https://github.com/MangelMaxime/Thoth/blob/master/demos/Thoth.Elmish.Demo/src/Debouncer.fs">View the code</a></em></p>
</div>
<script type="text/javascript" src="../demos/vendors.js"></script>
<script type="text/javascript" src="../demos/demo.js"></script>
<script type="text/javascript">
    Demos.DebouncerDemo("debouncer_demo");
</script>
<h2><a href="#how-to-use" aria-hidden="true"><span class="anchor" id="how-to-use"></span>#</a> How to use ?</h2>
<ol>
<li>Store the <code>Debouncer</code> instance in your model</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Model definition</span>
<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">Model </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Debouncer </span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">Debouncer</span><span>.</span><span style="color: #C18401">State</span>
<span>      </span><span style="color: #A0A1A7;font-style: italic">// ...</span>
<span>    </span><span style="color: #A626A4">}</span>

<span style="color: #A0A1A7;font-style: italic">// Model initialization</span>
<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">init</span><span style="color: #383A42"> </span><span style="color: #986801">()</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Debouncer </span><span style="color: #A626A4">=</span><span> Debouncer.create</span><span style="color: #986801">()</span>
<span>      </span><span style="color: #A0A1A7;font-style: italic">// ...</span>
<span>    </span><span style="color: #A626A4">}</span></code></pre>
<ol start="2">
<li>Register the message dedicated to the <code>Debouncer</code></li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Msg definition</span>
<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">Msg </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">|</span><span> DebouncerSelfMsg </span><span style="color: #A626A4">of</span><span> </span><span style="color: #C18401">Debouncer.SelfMessage</span><span style="color: #A626A4">&lt;</span><span style="color: #C18401">Msg</span><span style="color: #A626A4">&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// This is the message used by the Debouncer</span>
<span>    </span><span style="color: #A626A4">|</span><span> ChangeValue </span><span style="color: #A626A4">of</span><span> </span><span style="color: #C18401">string</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Message trigger each time the user type in the input</span>
<span>    </span><span style="color: #A626A4">|</span><span> EndOfInput </span><span style="color: #A0A1A7;font-style: italic">// Message we want to debounce</span></code></pre>
<ol start="3">
<li>Handle <code>DebouncerSelfMsg</code> in your update function</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">private</span><span> </span><span style="color: #E45649">update</span><span style="color: #383A42"> msg model</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">match</span><span> msg </span><span style="color: #A626A4">with</span>
<span>    </span><span style="color: #A626A4">|</span><span> DebouncerSelfMsg debouncerMsg </span><span style="color: #A626A4">-&gt;</span>
<span>        </span><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">debouncerModel</span><span style="color: #A626A4">,</span><span style="color: #383A42"> debouncerCmd</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span><span> Debouncer.update debouncerMsg model.Debouncer</span>
<span>        </span><span style="color: #A626A4">{</span><span> model </span><span style="color: #A626A4">with</span><span> Debouncer </span><span style="color: #A626A4">=</span><span> debouncerModel </span><span style="color: #A626A4">},</span><span> debouncerCmd</span></code></pre>
<p><em>Please note we don't need to use <code>Cmd.map</code> over <code>debouncerCmd</code> because it return a <code>Msg</code> directly</em></p>
<ol start="4">
<li>Bounce <code>EndOfInput</code> each time the user types something in the input</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">private</span><span> </span><span style="color: #E45649">update</span><span style="color: #383A42"> msg model</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">match</span><span> msg </span><span style="color: #A626A4">with</span>
<span>    </span><span style="color: #A626A4">|</span><span> ChangeValue newValue </span><span style="color: #A626A4">-&gt;</span>
<span>        </span><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">debouncerModel</span><span style="color: #A626A4">,</span><span style="color: #383A42"> debouncerCmd</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span>
<span>            model.Debouncer</span>
<span>            </span><span style="color: #A626A4">|&gt;</span><span> Debouncer.bounce </span><span style="color: #A626A4">(</span><span>TimeSpan.FromSeconds </span><span style="color: #986801">1.5</span><span style="color: #A626A4">)</span><span> </span><span style="color: #50A14F">&quot;user_input&quot;</span><span> EndOfInput</span>

<span>        </span><span style="color: #A626A4">{</span><span> model </span><span style="color: #A626A4">with</span><span> UserInput </span><span style="color: #A626A4">=</span><span> newValue</span>
<span>                     State </span><span style="color: #A626A4">=</span><span> State.IsTyping</span>
<span>                     Debouncer </span><span style="color: #A626A4">=</span><span> debouncerModel </span><span style="color: #A626A4">},</span><span> Cmd.batch </span><span style="color: #A626A4">[</span><span> Cmd.map DebouncerSelfMsg debouncerCmd </span><span style="color: #A626A4">]</span></code></pre>
<p><code>Debouncer.bounce</code> parameters:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">val</span><span> </span><span style="color: #E45649">bounce</span><span style="color: #A626A4">:</span>
<span style="color: #383A42">   delay       </span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">TimeSpan        </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Delay before trying to send `msgToSend`</span>
<span style="color: #383A42">   id          </span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">Debouncer.Id    </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Id used to identify the message in the debouncer. This is useful if you want to debounce a different message</span>
<span style="color: #383A42">   msgToSend   </span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">&#039;a              </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// The `Msg` to send</span>
<span style="color: #383A42">   currentState</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">Debouncer.State    </span><span style="color: #A0A1A7;font-style: italic">// Current debouncer state</span>
<span style="color: #383A42">              </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #C18401">Debouncer.State </span><span style="color: #A626A4">*</span><span style="color: #C18401"> Cmd</span><span style="color: #A626A4">&lt;</span><span style="color: #C18401">Debouncer.SelfMessage</span><span style="color: #A626A4">&lt;</span><span style="color: #C18401">&#039;a</span><span style="color: #A626A4">&gt;&gt;</span></code></pre>

                    </div>
                </div>
                <div class="column is-3 is-hidden-touch">
                        <nav class="toc"><ul class="toc-headings"><li><a href="#kezako"> Kezako ?</a></li></ul><ul class="toc-headings"><li><a href="#demo"> Demo</a></li></ul><ul class="toc-headings"><li><a href="#how-to-use"> How to use ?</a></li></ul></nav>
                </div>
            </div>
        </section>
    </div>
    <div><br/><div class="footer has-text-centered"><div class="container"><div class="content"><p><strong>Thoth</strong> by <a href="https://twitter.com/MangelMaxime">Maxime Mangel</a></p>
<p>Powered by <a href="https://mangelmaxime.github.io/Fulma/">Fulma</a>, <a href="https://github.com/fable-compiler/static-web-generator">Fable static-web-generator</a> and <a href="https://github.com/MangelMaxime/Code-Lightner">Code-Lightner</a>.</p>
</div></div></div></div>
    <script type="text/javascript">

        document.addEventListener('DOMContentLoaded', function () {

            // Get all "navbar-burger" elements
            var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

            // Check if there are any navbar burgers
            if ($navbarBurgers.length > 0) {

                // Add a click event on each of them
                $navbarBurgers.forEach(function ($el) {
                    $el.addEventListener('click', function () {

                        var $target = document.getElementById("navMenu");

                        // Toggle the class on both the "navbar-burger" and the "navbar-menu"
                        $el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');

                    });
                });
            }

        });

    </script>
</body>

</html>
